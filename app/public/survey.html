<!DOCTYPE html>
<html lang='en'>
<head>
	<meta charset='UTF-8'>
	<title>Survey</title>
 	<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
 	<script src='https://code.jquery.com/jquery.js'></script>
  	<script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js'></script>

  	<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css'>
</head>
<body>
	<div class='container'>
		<h2>Survey Questions</h2>
		<hr>
		<div id='aboutYouSection'>
			<h3 style='font-weight: bold'>About You</h2>
			<div class='panel-body'>
				<form role='form'>
					<div class='form-group'>
						<label for='name'>Name</label>
						<input type='text' class='form-control' id='name'>
					</div>
					<div class='form-group'>
						<label for='photo'>Link to Photo Image (Required)</label>
						<input type='text' class='form-control' id='photo'>
					</div> 
					<hr>
			</div>			
		</div>

		<div class='survey'>
			<h3 style='font-weight: bold'> Question 1 </h3>
			<p>Your mind is always buzzing with unexplored ideas and plans.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q1'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 2 </h3>
			<p>Generally speaking, you rely more on your experience than your imagination.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q2'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 3 </h3>
			<p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q3'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 4 </h3>
			<p>You rarely do something just out of sheer curiosity.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q4'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 5 </h3>
			<p>People can rarely upset you.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q5'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 6 </h3>
			<p>It is often difficult for you to relate to other people’s feelings.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q6'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 7 </h3>
			<p>In a discussion, truth should be more important than people’s sensitivities.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q7'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 8 </h3>
			<p>You rarely get carried away by fantasies and ideas.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q8'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 9 </h3>
			<p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q9'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>

			<h3 style='font-weight: bold'> Question 10 </h3>
			<p>You feel more energetic after spending time with a group of people.</p>
			<select data-placeholder='Select an Option' class='chosen-select' id='q10'>
				<option value=''></option>
				<option value='1'>1 (Strongly Disagree)</option>
				<option value='2'>2</option>
				<option value='3'>3</option>
				<option value='4'>4</option>
				<option value='5'>5 (Strongly Agree)</option>
			</select>
			<br><br>
		</div>

		<div align='center'>
			<a class='btn btn-primary btn-lg' id='submit'><i class='fa fa-check-circle' aria-hidden='true'></i> Submit</a> 
		</div>
		<hr>

		<footer class='footer'>
			<p><a href='/api/friends'>API Friends List</a> | <a href='https://github.com/Moogieee/FriendFinder'>GitHub Repo</a></p>
		</footer>
	</div> <!--end container-->

<!-- MODAL -->
<div class="modal fade" id='friend-modal'>
  <div class="modal-dialog" align='center'>
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Best Match</h4>
      </div>
      <div class="modal-body">
        <h2 id="matchedFriend"></h2>
        <img id="matchedPhoto"></
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

	
</body>
</html>

<script>

$('#submit').on('click', function(event) {
	event.preventDefault();

	function formValidation() {
		var isComplete = true;
		$('.form-control').each(function() {
			if($(this).val() === '') {
				isComplete = false;
			}
		});

		$('.chosen-select').each(function() {
			if($(this).val() === '') {
				isComplete = false;
			}
		});
		return isComplete
	}

	if(formValidation() === false) {
		alert('Please answer all questions in the survey');
	}
	else {
		var newSurvey = {
			name: $('#name').val().trim(),
			photo: $('#photo').val().trim(),
			scores: [
						$('#q1').val(), 
						$('#q2').val(), 
						$('#q3').val(), 
						$('#q4').val(), 
						$('#q5').val(), 
						$('#q6').val(), 
						$('#q7').val(), 
						$('#q8').val(), 
						$('#q9').val(), 
						$('#q10').val()
					]
		}

		var currentURL = window.location.origin;

		//post to friends api
		$.post(currentURL + '/api/friends', newSurvey, function(data) {
			console.log(data.name);
			$('#matchedFriend').text(data.name);
			$('#matchedPhoto').attr('src', data.photo);
			$('#friend-modal').modal('toggle');
		});
	}
})
</script>
